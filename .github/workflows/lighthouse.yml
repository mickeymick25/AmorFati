name: Lighthouse Audit

on:
  push:
    branches: [ 'main' ]
  pull_request:
    branches: [ 'main' ]
  workflow_dispatch: {}

jobs:
  lighthouse:
    name: Run Lighthouse CI
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Run Lighthouse (treosh/lighthouse-ci-action)
        uses: treosh/lighthouse-ci-action@v9
        with:
          # URL to audit - GitHub Pages public URL for this repo
          urls: 'https://mickeymick25.github.io/AmorFati'
          # Use temporary public storage for reports (avoids artifact creation issues)
          temporaryPublicStorage: true
          # do not attempt the runner artifact upload (can fail on some runners)
          uploadArtifacts: false
          # name for artifacts if enabled
          artifactName: 'lighthouse-results'
